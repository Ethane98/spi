% This is only for developer manual
\section{Internals}

This section describes the detailed internal design of self-propelled
instrumentation, from developer's perspective.
Current implementation is on Linux.

\subsection{Injector}

% Use dlopen
% Shared memory
The injector works in the following steps:
\begin{itemize}
  \item xx
\end{itemize}

\subsection{Agent}
\subsubsection{Parsing}
% Online parsing
\subsubsection{Initial Instrumentation}
% injector vs preload
\subsubsection{Intra-process Propagation} \label{sec:intrainst}
% Layout of snippet
% Strategy of instrumentation, reloc insn, reloc block, springboard, trap
\subsubsection{Inter-process Propagation}
% Pipe
% TCP
\subsubsection{Inter-thread Propagation}
\subsubsection{x86\_64 Issues}
% Memory allocator, long jump
% PC register thing

\subsubsection{Miscellaneous}
% Parsing library

% Thread-safe, locking